<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Technology & Geopolitics Simulation | The Geopolitics of Technology</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;0,8..60,700;1,8..60,400&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap');

    :root {
      --bg: #f6f5f1;
      --card: #ffffff;
      --ink: #1a1a1a;
      --muted: #5c5c5c;
      --accent: #2d5a9e;
      --accent-light: #e8eff8;
      --capability: #7c3aed;
      --control: #d97706;
      --legitimacy: #059669;
      --danger: #dc2626;
      --line: #e0ddd8;
      --highlight: #fef3c7;
      --warm-bg: #faf9f6;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'DM Sans', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    header {
      background: #1a1a1a;
      color: #fff;
      padding: 28px 28px 24px;
      border-bottom: 3px solid var(--accent);
    }

    header .course-tag {
      font-family: 'DM Sans', sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: #888;
      margin-bottom: 10px;
    }

    header h1 {
      margin: 0;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 24px;
      font-weight: 700;
      letter-spacing: -0.3px;
    }

    header .subtitle {
      margin: 10px 0 0;
      color: #aaa;
      font-size: 14px;
      max-width: 800px;
      line-height: 1.6;
    }

    header .subtitle strong {
      color: #ccc;
    }

    header .instructor {
      margin-top: 14px;
      font-size: 13px;
      color: #777;
    }

    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 24px;
      margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.03);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 18px;
      gap: 16px;
    }

    .card-header h2 {
      margin: 0;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 18px;
      font-weight: 700;
    }

    .card-header .meta {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }

    .framework-legend {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      padding: 14px 18px;
      background: var(--warm-bg);
      border: 1px solid var(--line);
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .framework-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
    }

    .framework-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .framework-dot.capability { background: var(--capability); }
    .framework-dot.control { background: var(--control); }
    .framework-dot.legitimacy { background: var(--legitimacy); }

    .framework-item strong { font-weight: 600; }

    /* Navigation Tabs */
    .tabs {
      display: flex;
      gap: 2px;
      background: #e0ddd8;
      padding: 3px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .tab {
      flex: 1;
      padding: 10px 16px;
      border: none;
      background: transparent;
      border-radius: 6px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab:hover { color: var(--ink); }
    .tab.active {
      background: var(--card);
      color: var(--ink);
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    /* State Comparison Grid */
    .states-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 14px;
    }

    .state-card {
      border: 2px solid var(--line);
      border-radius: 10px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      background: var(--card);
    }

    .state-card:hover {
      border-color: var(--accent);
      box-shadow: 0 3px 12px rgba(45, 90, 158, 0.12);
    }

    .state-card.selected {
      border-color: var(--accent);
      background: var(--accent-light);
    }

    .state-card .flag { font-size: 28px; margin-bottom: 8px; }

    .state-card h3 {
      margin: 0 0 4px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 16px;
      font-weight: 600;
    }

    .state-card .region {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 12px;
    }

    .indicator-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 8px 0;
    }

    .indicator-label { font-size: 12px; width: 80px; color: var(--muted); }

    .indicator-bar {
      flex: 1;
      height: 7px;
      background: #e8e6e1;
      border-radius: 4px;
      overflow: hidden;
    }

    .indicator-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.4s ease;
    }

    .indicator-fill.capability { background: var(--capability); }
    .indicator-fill.control { background: var(--control); }
    .indicator-fill.legitimacy { background: var(--legitimacy); }

    .indicator-value { font-size: 12px; font-weight: 600; width: 32px; text-align: right; }

    /* Scenario Panel */
    .scenario-box {
      background: var(--warm-bg);
      border: 1px solid var(--line);
      border-left: 4px solid var(--accent);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .scenario-tag {
      display: inline-block;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      padding: 4px 10px;
      border-radius: 4px;
      background: var(--accent);
      color: white;
      margin-bottom: 12px;
    }

    .scenario-title {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 20px;
      font-weight: 700;
      margin: 0 0 10px;
    }

    .scenario-context {
      font-size: 14px;
      color: var(--ink);
      margin-bottom: 16px;
      line-height: 1.7;
    }

    .scenario-stakes {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 16px;
    }

    .stake-item {
      padding: 14px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: white;
    }

    .stake-item.capability { border-left: 3px solid var(--capability); }
    .stake-item.control { border-left: 3px solid var(--control); }
    .stake-item.legitimacy { border-left: 3px solid var(--legitimacy); }

    .stake-item h4 {
      margin: 0 0 6px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 700;
    }

    .stake-item.capability h4 { color: var(--capability); }
    .stake-item.control h4 { color: var(--control); }
    .stake-item.legitimacy h4 { color: var(--legitimacy); }

    .stake-item p { margin: 0; font-size: 13px; color: var(--muted); line-height: 1.5; }

    /* Decision Options */
    .options-grid { display: grid; gap: 12px; margin-top: 16px; }

    .option-card {
      border: 2px solid var(--line);
      border-radius: 10px;
      padding: 18px;
      cursor: pointer;
      transition: all 0.2s;
      background: var(--card);
    }

    .option-card:hover { border-color: var(--accent); background: #fafafa; }
    .option-card.selected { border-color: var(--accent); background: var(--accent-light); }

    .option-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 6px; }

    .option-label {
      font-size: 11px;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .option-title {
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 15px;
      font-weight: 600;
      margin: 4px 0;
    }

    .option-desc { font-size: 13px; color: var(--muted); margin-bottom: 12px; line-height: 1.5; }

    .option-impacts { display: flex; gap: 8px; flex-wrap: wrap; }

    .impact-chip { font-size: 11px; font-weight: 600; padding: 4px 8px; border-radius: 4px; }
    .impact-chip.positive { background: #dcfce7; color: #166534; }
    .impact-chip.negative { background: #fee2e2; color: #991b1b; }
    .impact-chip.neutral { background: #f1f5f9; color: #475569; }

    /* Outcome Panel */
    .outcome-panel {
      background: #fffdf5;
      border: 1px solid #e5dfc8;
      border-radius: 10px;
      padding: 24px;
      margin-top: 20px;
    }

    .outcome-panel h3 {
      margin: 0 0 14px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 17px;
      color: #78350f;
    }

    .outcome-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin-bottom: 18px;
    }

    .outcome-item {
      text-align: center;
      padding: 14px;
      background: white;
      border-radius: 8px;
      border: 1px solid var(--line);
    }

    .outcome-item .label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
      font-weight: 600;
    }

    .outcome-item.capability .label { color: var(--capability); }
    .outcome-item.control .label { color: var(--control); }
    .outcome-item.legitimacy .label { color: var(--legitimacy); }

    .outcome-item .change { font-size: 24px; font-weight: 700; }
    .outcome-item .change.positive { color: #16a34a; }
    .outcome-item .change.negative { color: #dc2626; }

    .outcome-narrative { font-size: 14px; line-height: 1.7; color: #5c4813; }
    .outcome-narrative p { margin: 0 0 12px; }

    .outcome-narrative .state-analysis {
      background: white;
      border: 1px solid #e5dfc8;
      border-left: 3px solid var(--accent);
      border-radius: 6px;
      padding: 14px 16px;
      margin-top: 12px;
      font-size: 13px;
      color: var(--ink);
      line-height: 1.6;
    }

    .outcome-narrative .state-analysis strong { color: var(--accent); }

    /* Buttons */
    .btn {
      border: none;
      border-radius: 6px;
      padding: 11px 20px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: #234a84; }
    .btn-primary:disabled { background: #a3b8d4; cursor: not-allowed; }

    .btn-secondary { background: #eae8e3; color: var(--ink); }
    .btn-secondary:hover { background: #ddd9d2; }

    .btn-ghost { background: transparent; color: var(--accent); border: 1px solid var(--accent); }
    .btn-ghost:hover { background: var(--accent-light); }

    .actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 20px; flex-wrap: wrap; }

    /* Progress Tracker */
    .progress-bar { display: flex; gap: 4px; margin-bottom: 20px; }

    .progress-step {
      flex: 1; height: 5px; background: #e0ddd8; border-radius: 3px; transition: background 0.3s;
    }

    .progress-step.completed { background: var(--accent); }
    .progress-step.current { background: #7da4d4; }

    /* Summary Table */
    .summary-table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 16px; }

    .summary-table th, .summary-table td {
      padding: 12px; text-align: left; border-bottom: 1px solid var(--line);
    }

    .summary-table th {
      background: var(--warm-bg);
      font-weight: 600;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--muted);
    }

    .summary-table tr:hover td { background: #fafafa; }

    /* Debrief Section */
    .debrief-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 14px;
      margin-top: 18px;
    }

    .debrief-card {
      background: var(--warm-bg);
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 18px;
    }

    .debrief-card h4 {
      margin: 0 0 12px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .debrief-card ul { margin: 0; padding-left: 18px; font-size: 13px; color: var(--muted); }
    .debrief-card li { margin: 8px 0; line-height: 1.5; }

    /* Comparison View */
    .comparison-header {
      display: grid;
      grid-template-columns: 200px repeat(3, 1fr);
      gap: 12px;
      padding: 12px;
      background: var(--warm-bg);
      border-radius: 8px;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 13px;
    }

    .comparison-row {
      display: grid;
      grid-template-columns: 200px repeat(3, 1fr);
      gap: 12px;
      padding: 12px;
      border-bottom: 1px solid var(--line);
      font-size: 13px;
    }

    .comparison-row:hover { background: #fafafa; }
    .comparison-row .metric { font-weight: 500; }

    .hidden { display: none !important; }

    @media (max-width: 768px) {
      .scenario-stakes { grid-template-columns: 1fr; }
      .outcome-grid { grid-template-columns: 1fr; }
      .framework-legend { flex-direction: column; gap: 8px; }
      .comparison-header, .comparison-row { grid-template-columns: 1fr; gap: 4px; }
      header h1 { font-size: 20px; }
    }

    /* State profile detail */
    .state-profile { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    @media (max-width: 900px) { .state-profile { grid-template-columns: 1fr; } }

    .profile-section h4 {
      margin: 0 0 12px;
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      font-weight: 700;
    }

    .profile-list { margin: 0; padding: 0; list-style: none; }

    .profile-list li {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid var(--line);
      font-size: 13px;
    }

    .profile-list li:last-child { border-bottom: none; }
    .profile-value { font-weight: 600; }

    /* Intro styles */
    .intro-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 20px 0; }
    @media (max-width: 768px) { .intro-grid { grid-template-columns: 1fr; } }

    .intro-card {
      background: var(--warm-bg);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid var(--line);
    }

    .intro-card h3 {
      margin: 0 0 10px;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .intro-card p { margin: 0; font-size: 13px; color: var(--muted); line-height: 1.6; }

    .learning-objectives {
      background: var(--accent-light);
      border: 1px solid #c5d7ed;
      border-radius: 8px;
      padding: 18px;
      margin-top: 18px;
    }

    .learning-objectives h4 {
      margin: 0 0 12px;
      font-size: 13px;
      font-weight: 700;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .learning-objectives ul { margin: 0; padding-left: 18px; font-size: 13px; }
    .learning-objectives li { margin: 6px 0; line-height: 1.5; }

    .instructor-note {
      background: #fdf4ff;
      border: 1px solid #e9d5ee;
      border-left: 3px solid #9333ea;
      border-radius: 8px;
      padding: 16px 18px;
      margin-top: 18px;
      font-size: 13px;
      line-height: 1.6;
      color: #581c87;
    }

    .instructor-note strong {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: block;
      margin-bottom: 6px;
    }

    .instructor-note p { margin: 0 0 8px; }
    .instructor-note p:last-child { margin-bottom: 0; }
  </style>
</head>
<body>
<header>
  <div class="course-tag">The Geopolitics of Technology</div>
  <h1>Technology &amp; Geopolitics: A Structured Simulation</h1>
  <p class="subtitle">
    Explore how states, firms, and international bodies compete and cooperate in the digital era.
    Analyse technological power through <strong>Capability</strong>, <strong>Control</strong>, and <strong>Legitimacy</strong>.
  </p>
  <p class="instructor">Dr Muhanad Seloom</p>
</header>

<main>
  <div class="framework-legend">
    <div class="framework-item">
      <div class="framework-dot capability"></div>
      <span><strong>Capability</strong> â€” technical capacity, infrastructure, innovation</span>
    </div>
    <div class="framework-item">
      <div class="framework-dot control"></div>
      <span><strong>Control</strong> â€” governance, regulation, institutional power</span>
    </div>
    <div class="framework-item">
      <div class="framework-dot legitimacy"></div>
      <span><strong>Legitimacy</strong> â€” authority, norms, international standing</span>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="intro">Introduction</button>
    <button class="tab" data-tab="compare">Compare States</button>
    <button class="tab" data-tab="scenario">Decision Scenario</button>
    <button class="tab" data-tab="debrief">Debrief</button>
  </div>

  <!-- INTRO -->
  <section id="intro" class="card">
    <div class="card-header">
      <h2>About This Simulation</h2>
      <div class="meta">20â€“30 minutes</div>
    </div>

    <p style="font-size: 14px; margin-bottom: 16px; line-height: 1.7;">
      This simulation invites you to analyse technology not as a neutral tool, but as a <strong>political object</strong>
      governed through institutions, markets, and norms. You will compare how different states exercise technological
      power and navigate decision scenarios that reveal the tensions between capability, control, and legitimacy.
      There are no optimal choices â€” only trade-offs that reveal how structural position shapes action.
    </p>

    <div class="intro-grid">
      <div class="intro-card">
        <h3><span style="color: var(--capability);">1.</span> Compare States</h3>
        <p>
          Examine six states across the Global North and South. Each has a distinct technological profile shaped by
          R&amp;D investment, digital infrastructure, regulatory frameworks, and international positioning. Use the
          three-lens framework to analyse how technological power manifests differently across contexts.
        </p>
      </div>
      <div class="intro-card">
        <h3><span style="color: var(--control);">2.</span> Navigate Decisions</h3>
        <p>
          Take on the role of a state's technology policy team facing critical decisions. Each option involves
          trade-offs between building capability, maintaining control, and preserving legitimacy. Crucially, the
          <em>same decision produces different outcomes</em> depending on which state you represent.
        </p>
      </div>
      <div class="intro-card">
        <h3><span style="color: var(--legitimacy);">3.</span> Analyse Outcomes</h3>
        <p>
          See how your decisions interact with your state's structural position. Discover why
          technological capability does not translate uniformly into political influence, and how institutional
          constraints shape what actions appear legitimate â€” and to whom.
        </p>
      </div>
      <div class="intro-card">
        <h3><span style="color: var(--muted);">4.</span> Reflect &amp; Debrief</h3>
        <p>
          Engage with structured reflection prompts aligned with the course's learning objectives. Consider how
          different states would face the same scenario differently, and what this reveals about power, authority,
          and interdependence in contemporary global politics.
        </p>
      </div>
    </div>

    <div class="learning-objectives">
      <h4>Learning Objectives</h4>
      <ul>
        <li>Analyse technology as a source of power, constraint, and political authority</li>
        <li>Compare how different states exercise technological power across regions and regime types</li>
        <li>Apply qualitative and quantitative indicators to assess technological leverage</li>
        <li>Critically evaluate claims about dominance, dependence, and autonomy in the digital era</li>
        <li>Recognise that identical policy choices produce divergent outcomes depending on structural position</li>
      </ul>
    </div>

    <div class="instructor-note">
      <strong>Instructor Facilitation Note</strong>
      <p>This simulation works best when students in the same session play as <em>different states</em>. Assign 2â€“3 students per state, then have each group present their decisions and compare outcomes. Pause between scenarios for 3â€“5 minutes of structured discussion: "Why did the same option produce different results for the US and Nigeria?"</p>
      <p>The debrief questions are designed for small-group discussion (10â€“15 minutes) followed by plenary synthesis.</p>
    </div>

    <div class="actions">
      <button class="btn btn-primary" id="startBtn">Begin Simulation</button>
    </div>
  </section>

  <!-- COMPARE STATES -->
  <section id="compare" class="card hidden">
    <div class="card-header">
      <h2>State Profiles: Technological Power in Comparative Perspective</h2>
      <div class="meta">Select a state to examine its profile</div>
    </div>

    <p style="font-size: 13px; color: var(--muted); margin-bottom: 16px; line-height: 1.6;">
      Each state represents a different configuration of technological power. Compare indicators across
      capability (technical capacity), control (governance reach), and legitimacy (normative authority).
      Note how high scores in one dimension do not guarantee strength in others.
    </p>

    <div class="states-grid" id="statesGrid"></div>

    <div id="stateDetail" class="hidden" style="margin-top: 20px;">
      <div class="scenario-box">
        <div class="scenario-tag" id="detailStateName">State</div>
        <p class="scenario-context" id="detailStateDesc"></p>
        <div class="state-profile">
          <div class="profile-section">
            <h4>Capability Indicators</h4>
            <ul class="profile-list" id="capabilityList"></ul>
          </div>
          <div class="profile-section">
            <h4>Control Indicators</h4>
            <ul class="profile-list" id="controlList"></ul>
          </div>
          <div class="profile-section">
            <h4>Legitimacy Indicators</h4>
            <ul class="profile-list" id="legitimacyList"></ul>
          </div>
          <div class="profile-section">
            <h4>Key Characteristics</h4>
            <ul class="profile-list" id="characteristicsList"></ul>
          </div>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="btn btn-secondary" id="compareAllBtn">View Comparison Table</button>
      <button class="btn btn-primary" id="toScenarioBtn">Proceed to Decision Scenario</button>
    </div>

    <div id="comparisonTable" class="hidden" style="margin-top: 20px;">
      <h3 style="font-family: 'Source Serif 4', serif; font-size: 15px; margin-bottom: 12px;">Comparative Indicators</h3>
      <div class="comparison-header">
        <div>State</div>
        <div style="color: var(--capability);">Capability</div>
        <div style="color: var(--control);">Control</div>
        <div style="color: var(--legitimacy);">Legitimacy</div>
      </div>
      <div id="comparisonRows"></div>
    </div>
  </section>

  <!-- SCENARIO -->
  <section id="scenario" class="card hidden">
    <div class="card-header">
      <h2>Decision Scenario</h2>
      <div class="meta" id="scenarioMeta">Scenario 1 of 3</div>
    </div>

    <div class="progress-bar" id="progressBar">
      <div class="progress-step current"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
    </div>

    <div id="stateSelectPrompt" style="margin-bottom: 16px;">
      <p style="font-size: 14px; margin-bottom: 12px;">
        <strong>Select your state:</strong> Choose which state's perspective you will adopt. The same decisions will produce different outcomes depending on your state's structural position.
      </p>
      <div class="states-grid" id="scenarioStateSelect" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));"></div>
    </div>

    <div id="scenarioContent" class="hidden">
      <div class="scenario-box">
        <div class="scenario-tag" id="scenarioTag">Scenario</div>
        <h3 class="scenario-title" id="scenarioTitle"></h3>
        <p class="scenario-context" id="scenarioContext"></p>
        <div class="scenario-stakes">
          <div class="stake-item capability">
            <h4>Capability at Stake</h4>
            <p id="stakeCapability"></p>
          </div>
          <div class="stake-item control">
            <h4>Control at Stake</h4>
            <p id="stakeControl"></p>
          </div>
          <div class="stake-item legitimacy">
            <h4>Legitimacy at Stake</h4>
            <p id="stakeLegitimacy"></p>
          </div>
        </div>
      </div>

      <h3 style="font-family: 'Source Serif 4', serif; font-size: 15px; margin: 20px 0 12px;">Your Options</h3>
      <div class="options-grid" id="optionsGrid"></div>

      <div class="actions">
        <button class="btn btn-primary" id="commitDecisionBtn" disabled>Commit Decision</button>
      </div>

      <div id="outcomePanel" class="outcome-panel hidden">
        <h3>Outcome Analysis</h3>
        <div class="outcome-grid">
          <div class="outcome-item capability">
            <div class="label">Capability</div>
            <div class="change" id="outcomeCapability">+0</div>
          </div>
          <div class="outcome-item control">
            <div class="label">Control</div>
            <div class="change" id="outcomeControl">+0</div>
          </div>
          <div class="outcome-item legitimacy">
            <div class="label">Legitimacy</div>
            <div class="change" id="outcomeLegitimacy">+0</div>
          </div>
        </div>
        <div class="outcome-narrative" id="outcomeNarrative"></div>
        <div class="actions">
          <button class="btn btn-primary" id="nextScenarioBtn">Next Scenario</button>
        </div>
      </div>
    </div>
  </section>

  <!-- DEBRIEF -->
  <section id="debrief" class="card hidden">
    <div class="card-header">
      <h2>Simulation Debrief</h2>
      <div class="meta" id="debriefMeta">Session Complete</div>
    </div>

    <div id="debriefSummary">
      <h3 style="font-family: 'Source Serif 4', serif; font-size: 15px; margin-bottom: 12px;">Your Decision Summary</h3>
      <table class="summary-table" id="summaryTable">
        <thead>
          <tr>
            <th>Scenario</th>
            <th>Your State</th>
            <th>Decision</th>
            <th style="color: var(--capability);">Cap.</th>
            <th style="color: var(--control);">Ctrl.</th>
            <th style="color: var(--legitimacy);">Leg.</th>
          </tr>
        </thead>
        <tbody id="summaryBody"></tbody>
      </table>

      <div style="margin-top: 20px; padding: 18px; background: var(--warm-bg); border: 1px solid var(--line); border-radius: 8px;">
        <h4 style="margin: 0 0 8px; font-family: 'Source Serif 4', serif; font-size: 15px;">Final Position</h4>
        <p style="margin: 0; font-size: 14px; line-height: 1.6;" id="finalPosition"></p>
      </div>
    </div>

    <div class="debrief-grid">
      <div class="debrief-card">
        <h4 style="color: var(--capability);">On Capability</h4>
        <ul>
          <li>Where did technical capacity translate into political influence â€” and where did it fail?</li>
          <li>What constraints limited the exercise of technological power even for high-capability states?</li>
          <li>How did infrastructure dependence shape the options available to you?</li>
        </ul>
      </div>
      <div class="debrief-card">
        <h4 style="color: var(--control);">On Control</h4>
        <ul>
          <li>How did institutional frameworks shape â€” and constrain â€” your available options?</li>
          <li>Where did regulatory power compensate for limited technical capability?</li>
          <li>What role did alliances, dependencies, and external pressures play in your decisions?</li>
        </ul>
      </div>
      <div class="debrief-card">
        <h4 style="color: var(--legitimacy);">On Legitimacy</h4>
        <ul>
          <li>Which actions appeared legitimate â€” and to <em>which</em> audiences?</li>
          <li>How did domestic and international legitimacy pull in different directions?</li>
          <li>What normative claims were available to justify the exercise of power?</li>
        </ul>
      </div>
      <div class="debrief-card">
        <h4>Structural Position</h4>
        <ul>
          <li>How would a different state have navigated the same scenario? What changes?</li>
          <li>What does uneven leverage reveal about the structure of global tech governance?</li>
          <li>Why doesn't capability alone determine outcomes in international technology politics?</li>
        </ul>
      </div>
    </div>

    <div class="instructor-note" style="margin-top: 18px;">
      <strong>Discussion Prompt</strong>
      <p>Compare your outcomes with a peer who played as a different state. Identify one scenario where the same decision produced the most divergent results. What structural factor best explains the difference?</p>
    </div>

    <div class="actions">
      <button class="btn btn-secondary" id="downloadResultsBtn">Download Results (CSV)</button>
      <button class="btn btn-ghost" id="restartBtn">Restart Simulation</button>
    </div>
  </section>
</main>

<script>
const STATES = [
  {
    id: 'usa', name: 'United States', flag: 'ðŸ‡ºðŸ‡¸', region: 'Global North',
    description: 'The United States possesses unparalleled technological capability through its dominant tech firms, research universities, and innovation ecosystem. Control operates primarily through private sector dominance and alliance networks rather than direct state regulation. Legitimacy is contested: domestic debates over Big Tech power and international concerns about surveillance and extraterritorial reach complicate its normative authority.',
    capability: 92, control: 78, legitimacy: 65,
    indicators: {
      capability: [
        { name: 'R&D Spending (% GDP)', value: '3.5%' },
        { name: 'Global Tech Firms HQ', value: '7 of top 10' },
        { name: 'AI Research Output', value: 'Highest globally' },
        { name: 'Cloud Infrastructure', value: 'Dominant' }
      ],
      control: [
        { name: 'Platform Governance', value: 'Firm-led' },
        { name: 'Data Regulation', value: 'Fragmented' },
        { name: 'Export Controls', value: 'Extensive' },
        { name: 'Alliance Networks', value: 'Five Eyes+' }
      ],
      legitimacy: [
        { name: 'Domestic Trust in Tech', value: 'Contested' },
        { name: 'International Standing', value: 'Mixed' },
        { name: 'Multilateral Engagement', value: 'Selective' },
        { name: 'Normative Claims', value: 'Innovation / Freedom' }
      ]
    },
    characteristics: [
      'Platform power concentrated in private firms',
      'Extraterritorial regulatory reach via market access',
      'Innovation ecosystem advantage (universities + VC)',
      'Alliance dependencies create asymmetric leverage'
    ]
  },
  {
    id: 'china', name: 'China', flag: 'ðŸ‡¨ðŸ‡³', region: 'Global North/South Bridge',
    description: 'China has rapidly built technological capability through state-directed investment, indigenous innovation policies, and scale advantages. Control is highly centralised through party-state institutions that govern data, platforms, and firms. Legitimacy operates differently across audiences: strong domestic performance legitimacy but significant international concerns about surveillance, standards, and geopolitical ambitions.',
    capability: 88, control: 95, legitimacy: 45,
    indicators: {
      capability: [
        { name: 'R&D Spending (% GDP)', value: '2.4%' },
        { name: 'Manufacturing Scale', value: 'Dominant globally' },
        { name: '5G/6G Development', value: 'Leading' },
        { name: 'AI Applications', value: 'Extensive' }
      ],
      control: [
        { name: 'Platform Governance', value: 'State-directed' },
        { name: 'Data Regulation', value: 'Centralised' },
        { name: 'Tech Firm Relations', value: 'Subordinate to party' },
        { name: 'Internet Control', value: 'Great Firewall' }
      ],
      legitimacy: [
        { name: 'Domestic Trust', value: 'Performance-based' },
        { name: 'International Standing', value: 'Contested' },
        { name: 'BRI Tech Provision', value: 'Expanding' },
        { name: 'Normative Claims', value: 'Sovereignty / Development' }
      ]
    },
    characteristics: [
      'State-directed technological development model',
      'Scale advantages in manufacturing and data',
      'Digital Silk Road extending infrastructure influence',
      'Legitimacy deficit in liberal-democratic markets'
    ]
  },
  {
    id: 'skorea', name: 'South Korea', flag: 'ðŸ‡°ðŸ‡·', region: 'Global North / East Asia',
    description: 'South Korea is a major technological power built on the developmental state model, with globally dominant positions in semiconductors, displays, and consumer electronics through chaebol conglomerates. Control reflects a democratic state navigating industrial policy with corporate power. Legitimacy is high internationally as a democratic tech success story, though domestic debates around tech monopolies and labour conditions persist.',
    capability: 78, control: 68, legitimacy: 75,
    indicators: {
      capability: [
        { name: 'R&D Spending (% GDP)', value: '4.9% (highest globally)' },
        { name: 'Semiconductor Production', value: 'Top 2 globally' },
        { name: 'Broadband Infrastructure', value: 'World-leading' },
        { name: '5G Deployment', value: 'First mover' }
      ],
      control: [
        { name: 'Industrial Policy', value: 'Active state role' },
        { name: 'Data Protection', value: 'GDPR-aligned' },
        { name: 'Chaebol Relations', value: 'Interdependent' },
        { name: 'Alliance Position', value: 'US-aligned' }
      ],
      legitimacy: [
        { name: 'Domestic Trust', value: 'Moderate' },
        { name: 'International Standing', value: 'High' },
        { name: 'Democratic Credentials', value: 'Strong' },
        { name: 'Normative Claims', value: 'Innovation / Democracy' }
      ]
    },
    characteristics: [
      'Developmental state with chaebol-led innovation',
      'Critical node in global semiconductor supply chains',
      'Democratic governance as legitimacy asset',
      'Strategic vulnerability between US and China'
    ]
  },
  {
    id: 'india', name: 'India', flag: 'ðŸ‡®ðŸ‡³', region: 'Global South',
    description: 'India combines growing technological capability with contested control mechanisms. Its massive digital public infrastructure (UPI, Aadhaar) demonstrates state capacity, while its IT services sector provides global reach. Control is evolving rapidly through data localisation and platform regulation. Legitimacy draws on democratic credentials and Global South leadership.',
    capability: 58, control: 55, legitimacy: 68,
    indicators: {
      capability: [
        { name: 'IT Services Export', value: '$194B' },
        { name: 'Digital Public Infra', value: 'Advanced (UPI)' },
        { name: 'Startup Ecosystem', value: 'Growing rapidly' },
        { name: 'Manufacturing', value: 'Emerging' }
      ],
      control: [
        { name: 'Data Localisation', value: 'Expanding' },
        { name: 'Platform Regulation', value: 'Evolving' },
        { name: 'Digital India Stack', value: 'Comprehensive' },
        { name: 'Tech Firm Relations', value: 'Negotiated' }
      ],
      legitimacy: [
        { name: 'Domestic Trust', value: 'Mixed' },
        { name: 'Democratic Credentials', value: 'Significant' },
        { name: 'Global South Voice', value: 'Prominent' },
        { name: 'Normative Claims', value: 'Digital inclusion' }
      ]
    },
    characteristics: [
      'Scale advantage: 1.4B digital users',
      'Digital public infrastructure as exportable model',
      'Strategic non-alignment between US and China',
      'Democratic legitimacy as differentiator'
    ]
  },
  {
    id: 'uae', name: 'UAE', flag: 'ðŸ‡¦ðŸ‡ª', region: 'Global South / Gulf',
    description: 'The UAE exemplifies small-state digital strategy: leveraging sovereign wealth to acquire capability, positioning as a regional tech hub, and balancing between global powers. Control is highly centralised but market-friendly. Legitimacy rests on modernisation narratives and positioning as a neutral connector between East and West.',
    capability: 48, control: 72, legitimacy: 55,
    indicators: {
      capability: [
        { name: 'R&D Investment', value: 'High growth' },
        { name: 'AI National Strategy', value: 'Ambitious' },
        { name: 'Space Programme', value: 'Active' },
        { name: 'Indigenous Tech', value: 'Limited' }
      ],
      control: [
        { name: 'Data Governance', value: 'Centralised' },
        { name: 'Tech Procurement', value: 'Strategic' },
        { name: 'Free Zone Model', value: 'Extensive' },
        { name: 'Alliance Position', value: 'Multi-aligned' }
      ],
      legitimacy: [
        { name: 'Domestic Standing', value: 'High' },
        { name: 'Regional Influence', value: 'Significant' },
        { name: 'Global Hub Status', value: 'Growing' },
        { name: 'Normative Claims', value: 'Modernisation' }
      ]
    },
    characteristics: [
      'Sovereign wealth enables tech acquisition',
      'Hub strategy: connecting global flows',
      'Multi-alignment between major powers',
      'Authoritarian modernisation model'
    ]
  },
  {
    id: 'nigeria', name: 'Nigeria', flag: 'ðŸ‡³ðŸ‡¬', region: 'Global South / Africa',
    description: 'Nigeria represents the opportunities and constraints facing large developing states. Growing tech capability through its vibrant startup ecosystem contrasts with limited state control over digital infrastructure. Legitimacy is complicated by governance challenges but bolstered by demographic weight and cultural influence across Africa.',
    capability: 32, control: 28, legitimacy: 52,
    indicators: {
      capability: [
        { name: 'Tech Startup Funding', value: 'Africa\'s highest' },
        { name: 'Digital Infrastructure', value: 'Developing' },
        { name: 'Developer Talent', value: 'Growing rapidly' },
        { name: 'Manufacturing', value: 'Limited' }
      ],
      control: [
        { name: 'Platform Regulation', value: 'Weak' },
        { name: 'Data Governance', value: 'Nascent' },
        { name: 'Infrastructure Ownership', value: 'Foreign-dependent' },
        { name: 'Policy Capacity', value: 'Constrained' }
      ],
      legitimacy: [
        { name: 'Domestic Trust in Govt', value: 'Low' },
        { name: 'Regional Influence', value: 'Significant' },
        { name: 'Demographic Weight', value: 'Africa\'s largest' },
        { name: 'Normative Claims', value: 'Digital access' }
      ]
    },
    characteristics: [
      'Vibrant private tech ecosystem despite state weakness',
      'State capacity constraints on governance',
      'Infrastructure dependency on external actors',
      'Demographic dividend potential'
    ]
  }
];

const STATE_MODIFIERS = {
  1: {
    a: {
      usa:     { cap: -5,  ctrl: 20, leg: 5,  narrative: 'As the home market of most major platforms, US enforcement carries enormous weight. The platform cannot easily exit the world\'s largest digital advertising market. Your regulatory credibility soars, and domestic competitors have the ecosystem depth to fill gaps quickly. However, Silicon Valley lobbying intensifies against what firms call governmental overreach.' },
      china:   { cap: -2,  ctrl: 15, leg: 0,  narrative: 'China has already enforced similar measures through the Great Firewall. This scenario reinforces existing control mechanisms. The domestic alternatives (WeChat, Weibo, Douyin) are already dominant, so infrastructure disruption is minimal. International observers see this as confirmation of China\'s approach rather than a new assertion of sovereignty.' },
      skorea:  { cap: -8,  ctrl: 15, leg: 8,  narrative: 'South Korea\'s strong democratic institutions give regulatory enforcement legitimacy, but the economy is deeply integrated with global platforms. Korean tech firms like Naver and Kakao could absorb some displaced users, but the transition strains the startup ecosystem that depends on global platform APIs. Democratic process lends credibility to the decision.' },
      india:   { cap: -12, ctrl: 12, leg: 8,  narrative: 'India\'s enforcement sends a powerful signal â€” the world\'s largest digital market by users is willing to act. However, the infrastructure gap is real: 80 million users face disruption, and domestic alternatives are less mature. The move resonates with Global South states asserting digital sovereignty. Implementation capacity is tested.' },
      uae:    { cap: -8,  ctrl: 18, leg: 3,  narrative: 'The UAE\'s centralised governance enables swift enforcement, but the small market size limits its leverage over the platform. The free-zone model complicates enforcement across jurisdictions. Regional partners watch closely, and the UAE\'s reputation as a business-friendly hub faces tension with regulatory assertiveness.' },
      nigeria: { cap: -18, ctrl: 8,  leg: 2,  narrative: 'Nigeria faces the starkest trade-off. With limited domestic alternatives and weak digital infrastructure, platform exit creates severe disruption to commerce, news, and civic life. Enforcement capacity is genuinely tested â€” can the state actually monitor compliance? The 2021 Twitter ban precedent showed both the appeal and the costs of this approach. Some civil society groups question government motives.' }
    },
    b: {
      usa:     { cap: 8,  ctrl: -3,  leg: 2,  narrative: 'The US\'s market leverage makes compromise favourable â€” the platform needs access more than you need the platform. Negotiations produce meaningful concessions. Your regulatory framework appears pragmatic rather than ideological, though some domestic critics wanted a harder line.' },
      china:   { cap: 3,  ctrl: -8,  leg: 2,  narrative: 'Compromise is unusual for China\'s regulatory approach and may be read as inconsistency. The party-state\'s authority derives partly from decisive action. Negotiating with a foreign platform sends mixed signals about the boundaries of state control, though it may signal openness to foreign partners on Beijing\'s terms.' },
      skorea:  { cap: 6,  ctrl: -4,  leg: 3,  narrative: 'South Korea\'s democratic process makes compromise natural â€” public hearings, stakeholder consultations, and legislative review are expected. The outcome satisfies most constituencies without dramatic disruption. Korea\'s reputation as a pragmatic, rules-based partner is reinforced.' },
      india:   { cap: 6,  ctrl: -5,  leg: 0,  narrative: 'India\'s negotiating leverage comes from market size rather than regulatory capacity. The platform agrees to partial compliance, but implementation monitoring is difficult. The outcome is read as pragmatic engagement by some, and capitulation by others. It buys time but defers the fundamental governance question.' },
      uae:    { cap: 5,  ctrl: -3,  leg: 2,  narrative: 'Compromise aligns well with the UAE\'s connector identity. The deal-making approach is consistent with its business-friendly reputation. However, some question whether the compromise grants the platform more flexibility than intended, given the UAE\'s relatively small bargaining leverage.' },
      nigeria: { cap: 8,  ctrl: -3,  leg: 3,  narrative: 'For Nigeria, securing any compliance from a major platform is a meaningful achievement given limited regulatory capacity. The compromise allows continued service while building institutional experience. This is widely seen as a realistic outcome for a state with constrained leverage.' }
    },
    c: {
      usa:     { cap: 8,  ctrl: -12, leg: -8,  narrative: 'US suspension is read globally as regulatory capture â€” the world\'s most powerful state backing down under corporate pressure. The credibility cost is enormous: other regulators lose confidence, and platforms learn that US rules can be challenged. Domestically, both progressive and populist critics attack the decision.' },
      china:   { cap: 5,  ctrl: -20, leg: -5,  narrative: 'Suspension would be almost inconceivable for China\'s party-state and would represent a fundamental challenge to centralised authority. If it occurred, the legitimacy cost within the party system would be severe. This option is structurally incompatible with China\'s governance model.' },
      skorea:  { cap: 6,  ctrl: -10, leg: -12, narrative: 'In South Korea\'s democratic context, suspension after public debate looks like capitulation to corporate power. The democratic process that gave the regulation legitimacy now amplifies the credibility cost of retreat. Media scrutiny is intense, and opposition parties seize the issue.' },
      india:   { cap: 10, ctrl: -12, leg: -10, narrative: 'India\'s suspension confirms fears that developing states lack the institutional capacity to regulate global platforms. The immediate economic relief is real, but the longer-term cost to India\'s credibility as a digital governance leader in the Global South is significant.' },
      uae:    { cap: 6,  ctrl: -10, leg: -8,  narrative: 'The UAE\'s suspension is read as prioritising business continuity over regulatory authority. Given the authoritarian governance model, the decision is swift but raises questions about whether the modernisation narrative extends to genuine regulatory capacity or merely market access.' },
      nigeria: { cap: 12, ctrl: -8,  leg: -12, narrative: 'Nigeria\'s suspension confirms the structural dependency narrative. The state simply cannot afford the disruption, and everyone knows it. The decision reveals the asymmetry at the heart of platform governance: states with fewer domestic alternatives have less bargaining power, regardless of their formal sovereign rights.' }
    }
  },
  2: {
    a: {
      usa:     { cap: -3,  ctrl: 12, leg: 12, narrative: 'US technology partnerships extend the American tech ecosystem\'s reach. The alliance framework creates dependency â€” your partner now relies on American AI infrastructure, deepening integration. However, diffusion of advanced AI systems raises national security concerns, and congressional scrutiny intensifies. Your partner chose your ecosystem, blocking the rival\'s offer.' },
      china:   { cap: -5,  ctrl: 8,  leg: 8,  narrative: 'China\'s BRI-aligned partnerships extend the Digital Silk Road model. Full technology transfer deepens partner dependency on Chinese AI infrastructure and standards. However, international observers raise concerns about surveillance capabilities embedded in Chinese systems. Partners in the Global South welcome the access.' },
      skorea:  { cap: -6,  ctrl: 8,  leg: 10, narrative: 'South Korea\'s semiconductor and AI expertise makes it a valued partner. Full cooperation reinforces Korea\'s reputation as a reliable technology partner, but diffusion of advanced capabilities risks eroding the competitive edge that Samsung and SK Hynix depend on. The democratic framework lends trust to the partnership.' },
      india:   { cap: -4,  ctrl: 6,  leg: 10, narrative: 'India\'s AI sector is growing but not yet at the frontier, so full partnership primarily involves IT services and digital public infrastructure expertise. The partnership reinforces India\'s role as a Global South technology leader and builds South-South cooperation. Capability diffusion is limited because the most advanced systems aren\'t India\'s to share.' },
      uae:    { cap: -8,  ctrl: 6,  leg: 8,  narrative: 'The UAE\'s AI capability is largely acquired rather than indigenous, which complicates technology transfer â€” you are partly re-exporting others\' innovations. The partnership strengthens regional leadership but may strain relationships with original technology providers. Multi-alignment is tested when partners ask where the technology came from.' },
      nigeria: { cap: -2,  ctrl: 4,  leg: 12, narrative: 'Nigeria\'s partnership offer is primarily talent and market access rather than frontier technology. This reframes the narrative from technology consumer to technology partner. The partnership builds Nigeria\'s institutional experience and legitimacy as a digital actor. The capability cost is low because Nigeria\'s edge isn\'t in proprietary systems.' }
    },
    b: {
      usa:     { cap: 2,  ctrl: 8,  leg: 5,  narrative: 'The tiered approach leverages America\'s position as technology originator. Conditions create governance mechanisms that extend US standards into the partner\'s ecosystem. Your most advanced capabilities remain protected, while the partnership still blocks the rival\'s offer.' },
      china:   { cap: 0,  ctrl: 6,  leg: 3,  narrative: 'Tiered access is somewhat inconsistent with China\'s typical approach of comprehensive partnership deals. The conditions signal caution that may frustrate the requesting partner. However, it protects China\'s most sensitive AI capabilities while maintaining the relationship.' },
      skorea:  { cap: 0,  ctrl: 6,  leg: 6,  narrative: 'This approach aligns well with South Korea\'s careful, institutionalised foreign policy. The democratic oversight process makes tiered access transparent and defensible. Korea maintains its technological edge in semiconductors while building partnership trust through shared AI applications.' },
      india:   { cap: 0,  ctrl: 5,  leg: 5,  narrative: 'India\'s tiered approach is credible given its own experience navigating technology access conditions from larger powers. The framework builds institutional capacity for managing technology partnerships and positions India as a thoughtful partner.' },
      uae:    { cap: 0,  ctrl: 4,  leg: 5,  narrative: 'The UAE\'s conditional approach works well with its free-zone model â€” different tiers for different levels of access. However, the conditions may be difficult to monitor given limited indigenous assessment capability.' },
      nigeria: { cap: 0,  ctrl: 3,  leg: 5,  narrative: 'Nigeria\'s tiered approach faces a credibility challenge: does the state have the institutional capacity to monitor compliance with conditions? The framework is sound but implementation stretches thin governance resources.' }
    },
    c: {
      usa:     { cap: 12, ctrl: -8,  leg: -5,  narrative: 'The US decline preserves technological advantage but damages alliance credibility. Your partner begins exploring the rival power\'s AI partnership in earnest. Congressional hawks approve, but the State Department warns of a strategic miscalculation that could realign critical partnerships.' },
      china:   { cap: 10, ctrl: -10, leg: -8,  narrative: 'China\'s refusal contradicts the Digital Silk Road narrative of open technology partnership. The requesting state questions Beijing\'s commitment to mutual development. The rival power offers a targeted alternative, potentially flipping the partner\'s alignment.' },
      skorea:  { cap: 8,  ctrl: -8,  leg: -6,  narrative: 'South Korea\'s refusal is interpreted through its alliance dynamics. If the requesting state is a US-aligned partner, Washington may pressure Seoul to reconsider. Korea\'s reputation as a reliable partner suffers, and the episode highlights Korea\'s strategic squeeze between great power expectations.' },
      india:   { cap: 6,  ctrl: -6,  leg: -8,  narrative: 'India\'s refusal undermines its positioning as a Global South technology leader. The non-alignment strategy works when India is a bridge, not when it denies access. Peer states in the developing world question whether India\'s digital sovereignty rhetoric is self-serving.' },
      uae:    { cap: 5,  ctrl: -10, leg: -6,  narrative: 'The UAE\'s refusal is particularly costly for a state whose strategy depends on being a connector. If the UAE won\'t share technology, its hub status becomes about logistics rather than innovation.' },
      nigeria: { cap: 4,  ctrl: -4,  leg: -5,  narrative: 'Nigeria\'s refusal has limited strategic impact because the requesting state likely has alternative technology sources. The episode reveals the limits of Nigeria\'s technological leverage â€” declining a request means less when you aren\'t the preferred partner.' }
    }
  },
  3: {
    a: {
      usa:     { cap: -8,  ctrl: 18, leg: 12, narrative: 'The US has the financial resources and domestic alternatives (Ericsson partnerships, Open RAN) to execute rapid replacement. The cost is absorbable. This reinforces US leadership in alliance-based infrastructure standards and sends a powerful signal about the costs of dependence on contested suppliers.' },
      china:   { cap: -5,  ctrl: 10, leg: 5,  narrative: 'This scenario is unusual for China, which is more often the contested provider than the dependent state. If China faces dependency on US semiconductor equipment, accelerated replacement through indigenous alternatives is a core strategic priority aligned with self-reliance ideology.' },
      skorea:  { cap: -12, ctrl: 15, leg: 10, narrative: 'South Korea\'s semiconductor expertise positions it well to produce alternative components, but its telecom infrastructure is deeply integrated with both contested and allied suppliers. Replacement is technically feasible but expensive. Korea\'s US alliance makes compliance expected, and democratic institutions provide domestic legitimacy.' },
      india:   { cap: -18, ctrl: 10, leg: 8,  narrative: 'India faces the highest capability cost among major states. With 70% dependency and limited domestic manufacturing alternatives, accelerated replacement causes significant service disruptions across a network serving 1.4 billion users. However, the "Make in India" manufacturing push receives a boost.' },
      uae:    { cap: -15, ctrl: 12, leg: 10, narrative: 'The UAE\'s sovereign wealth fund can absorb the financial cost, but the technical transition is challenging given limited indigenous telecom capability. Replacement signals alignment with the pressuring ally, which may strain the UAE\'s carefully cultivated multi-alignment.' },
      nigeria: { cap: -22, ctrl: 6,  leg: 5,  narrative: 'This is the most painful scenario for Nigeria. Infrastructure replacement costs are prohibitive relative to state capacity, and there are few domestic alternatives. Service disruptions would affect already limited connectivity. The decision reveals the harsh structural inequality in global infrastructure governance.' }
    },
    b: {
      usa:     { cap: -3,  ctrl: 8,  leg: 2,  narrative: 'The US gradual approach frustrates alliance partners who want decisive action but is domestically defensible. New installations use alternative providers while legacy systems are phased out. Some allies question US resolve, but the plan\'s credibility rests on America\'s track record.' },
      china:   { cap: -3,  ctrl: 6,  leg: 0,  narrative: 'A gradual transition aligns with China\'s long-term industrial planning approach. The dual-circulation strategy already prioritises indigenous capability building. Progress is steady and monitored by state institutions.' },
      skorea:  { cap: -5,  ctrl: 6,  leg: 2,  narrative: 'South Korea\'s democratic institutions make gradual transition natural â€” legislative approval, public consultation, and industry adjustment all take time. Korea\'s own telecom equipment industry (Samsung Networks) benefits from the transition.' },
      india:   { cap: -6,  ctrl: 5,  leg: 0,  narrative: 'India\'s gradual approach is pragmatic given infrastructure constraints. The timeline allows domestic manufacturing capacity to develop. However, the ally views the pace as insufficient, and the contested provider\'s continued presence raises ongoing security concerns.' },
      uae:    { cap: -5,  ctrl: 5,  leg: 0,  narrative: 'The UAE\'s gradual approach preserves the multi-alignment strategy temporarily. New free-zone installations use alternative providers while existing networks continue. Neither the ally nor the contested provider is fully satisfied.' },
      nigeria: { cap: -8,  ctrl: 4,  leg: 0,  narrative: 'For Nigeria, even a gradual transition strains resources. The timeline is realistic but funding is uncertain. International development finance institutions may offer support, creating new dependencies.' }
    },
    c: {
      usa:     { cap: 5,  ctrl: -8,  leg: -12, narrative: 'US refusal to replace contested infrastructure would be geopolitically shocking â€” contradicting years of pressure on allies to do exactly this. The hypocrisy would devastate alliance credibility. This option is nearly inconceivable given the US role as the primary advocate for infrastructure replacement.' },
      china:   { cap: 5,  ctrl: -8,  leg: -10, narrative: 'China maintaining dependency on a sanctioned foreign provider would contradict core self-reliance doctrine. The party-state\'s legitimacy rests partly on technological sovereignty narratives. This option is deeply inconsistent with China\'s strategic culture.' },
      skorea:  { cap: 5,  ctrl: -10, leg: -15, narrative: 'South Korea maintaining contested infrastructure defies its US alliance obligations and triggers the most severe legitimacy cost. As a US treaty ally, the intelligence-sharing implications are immediate. Washington restricts classified technology sharing, and Korea\'s semiconductor supply chain position becomes vulnerable.' },
      india:   { cap: 6,  ctrl: -8,  leg: -12, narrative: 'India maintaining contested infrastructure is more plausible given its non-alignment tradition but carries real costs. The pressuring ally restricts technology cooperation. Other states read India\'s position as prioritising cost savings over security, undermining digital sovereignty credibility.' },
      uae:    { cap: 5,  ctrl: -10, leg: -15, narrative: 'The UAE maintaining contested infrastructure severely damages its connector strategy. The pressuring ally restricts intelligence cooperation and defense sales â€” critical for the UAE\'s security architecture. This tips the carefully balanced multi-alignment decisively toward one camp.' },
      nigeria: { cap: 8,  ctrl: -6,  leg: -10, narrative: 'Nigeria maintaining its infrastructure is the most defensible version of this option â€” the state genuinely cannot afford replacement. However, the decision formalises dependency and limits future options. The episode illustrates structural inequality in global tech governance.' }
    }
  }
};

const SCENARIOS = [
  {
    id: 1, tag: 'Platform Governance Crisis',
    title: 'A Major Platform Threatens to Exit Your Market',
    context: 'A dominant global social media platform has announced it may cease operations in your state due to new content moderation requirements. The platform has 80 million users domestically and is a key channel for commerce, news, and political discourse. Civil society groups support the regulations, while business interests warn of economic disruption. Other states are watching how you respond.',
    stakes: {
      capability: 'Loss of platform infrastructure affects digital commerce and communication capacity',
      control: 'Backing down signals regulatory weakness; standing firm tests enforcement capacity',
      legitimacy: 'Domestic audiences demand sovereignty; international observers assess rule of law'
    },
    options: [
      { id: 'a', label: 'Option A', title: 'Enforce Regulations Fully', description: 'Maintain your regulatory position and allow the platform to exit if it refuses compliance. Signal that domestic law applies to all operators.', impacts: [ { type: 'negative', text: 'Capability â†“: Infrastructure gap' }, { type: 'positive', text: 'Control â†‘: Regulatory credibility' }, { type: 'neutral', text: 'Legitimacy: Depends on state' } ] },
      { id: 'b', label: 'Option B', title: 'Negotiate a Compromise', description: 'Engage in extended negotiations, offering implementation flexibility in exchange for partial compliance and continued service.', impacts: [ { type: 'neutral', text: 'Capability: Service continuity' }, { type: 'negative', text: 'Control â†“: Perceived flexibility' }, { type: 'neutral', text: 'Legitimacy: Mixed signals' } ] },
      { id: 'c', label: 'Option C', title: 'Suspend Enforcement', description: 'Quietly delay implementation of the regulations, citing need for further consultation. Allow the platform to continue operating under existing terms.', impacts: [ { type: 'positive', text: 'Capability â†‘: No disruption' }, { type: 'negative', text: 'Control â†“: Credibility loss' }, { type: 'negative', text: 'Legitimacy â†“: Sovereignty questions' } ] }
    ]
  },
  {
    id: 2, tag: 'AI Export Controls',
    title: 'Allied State Requests AI Technology Transfer',
    context: 'A close strategic partner requests access to advanced AI systems developed by your national research institutions and private sector. The technology has dual-use potential. Providing access would strengthen the alliance and generate revenue, but risks capability diffusion. A rival power is offering its own AI partnership to the requesting state.',
    stakes: {
      capability: 'Sharing may accelerate partner\'s capability while potentially eroding your advantage',
      control: 'Transfer agreements require governance frameworks; monitoring compliance is difficult',
      legitimacy: 'Alliance solidarity versus non-proliferation norms and domestic concerns'
    },
    options: [
      { id: 'a', label: 'Option A', title: 'Full Technology Partnership', description: 'Agree to comprehensive AI cooperation including advanced systems, joint research, and capability building. Deepen alliance integration.', impacts: [ { type: 'negative', text: 'Capability â†“: Advantage diffusion' }, { type: 'positive', text: 'Control â†‘: Alliance framework' }, { type: 'positive', text: 'Legitimacy â†‘: Partnership trust' } ] },
      { id: 'b', label: 'Option B', title: 'Tiered Access with Conditions', description: 'Offer access to some AI systems with strict end-use monitoring, technology safeguards, and limitations on the most sensitive capabilities.', impacts: [ { type: 'neutral', text: 'Capability: Controlled sharing' }, { type: 'neutral', text: 'Control â†‘: Conditional framework' }, { type: 'neutral', text: 'Legitimacy â†‘: Balanced approach' } ] },
      { id: 'c', label: 'Option C', title: 'Decline the Request', description: 'Refuse the technology transfer citing security concerns and non-proliferation commitments. Offer alternative cooperation in less sensitive areas.', impacts: [ { type: 'positive', text: 'Capability â†‘: Advantage preserved' }, { type: 'negative', text: 'Control â†“: Alliance strain' }, { type: 'negative', text: 'Legitimacy â†“: Partnership damage' } ] }
    ]
  },
  {
    id: 3, tag: 'Digital Infrastructure Crisis',
    title: 'Critical Infrastructure Vulnerable to Foreign Control',
    context: 'An audit reveals that 70% of your state\'s telecommunications infrastructure relies on equipment from a foreign provider now subject to sanctions by a major ally. Removing this equipment would cost billions and take years. Your ally is pressuring immediate action. The equipment provider offers security guarantees and threatens legal action if excluded.',
    stakes: {
      capability: 'Infrastructure replacement affects network quality and digital services',
      control: 'Dependency on foreign infrastructure limits sovereign control over critical systems',
      legitimacy: 'Alliance obligations versus economic pragmatism and legal commitments'
    },
    options: [
      { id: 'a', label: 'Option A', title: 'Accelerated Replacement', description: 'Commit to rapid infrastructure replacement despite costs. Align with ally demands and reduce dependency on the contested provider.', impacts: [ { type: 'negative', text: 'Capability â†“: Transition disruption' }, { type: 'positive', text: 'Control â†‘: Reduced dependency' }, { type: 'positive', text: 'Legitimacy â†‘: Alliance alignment' } ] },
      { id: 'b', label: 'Option B', title: 'Gradual Transition', description: 'Announce a multi-year phase-out plan. New installations use alternative providers while existing equipment is replaced on natural upgrade cycles.', impacts: [ { type: 'neutral', text: 'Capability â†“: Managed transition' }, { type: 'neutral', text: 'Control â†‘: Incremental gains' }, { type: 'neutral', text: 'Legitimacy: Partial satisfaction' } ] },
      { id: 'c', label: 'Option C', title: 'Maintain Current Infrastructure', description: 'Resist pressure to remove existing equipment. Implement enhanced monitoring and security measures while avoiding costly replacement.', impacts: [ { type: 'positive', text: 'Capability â†‘: No disruption' }, { type: 'negative', text: 'Control â†“: Dependency remains' }, { type: 'negative', text: 'Legitimacy â†“: Alliance damage' } ] }
    ]
  }
];

// ============ STATE ============
let currentTab = 'intro';
let selectedState = null;
let selectedScenarioState = null;
let currentScenario = 0;
let selectedOption = null;
let decisionHistory = [];
let cumulativeScores = { capability: 0, control: 0, legitimacy: 0 };

const tabBtns = document.querySelectorAll('.tab');
const sectionEls = { intro: document.getElementById('intro'), compare: document.getElementById('compare'), scenario: document.getElementById('scenario'), debrief: document.getElementById('debrief') };

function switchTab(tabId) {
  currentTab = tabId;
  tabBtns.forEach(t => t.classList.toggle('active', t.dataset.tab === tabId));
  Object.entries(sectionEls).forEach(([id, el]) => el.classList.toggle('hidden', id !== tabId));
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function renderStateCards() {
  const grid = document.getElementById('statesGrid');
  grid.innerHTML = STATES.map(s => `
    <div class="state-card" data-state="${s.id}">
      <div class="flag">${s.flag}</div>
      <h3>${s.name}</h3>
      <div class="region">${s.region}</div>
      <div class="indicator-row"><div class="indicator-label">Capability</div><div class="indicator-bar"><div class="indicator-fill capability" style="width:${s.capability}%"></div></div><div class="indicator-value">${s.capability}</div></div>
      <div class="indicator-row"><div class="indicator-label">Control</div><div class="indicator-bar"><div class="indicator-fill control" style="width:${s.control}%"></div></div><div class="indicator-value">${s.control}</div></div>
      <div class="indicator-row"><div class="indicator-label">Legitimacy</div><div class="indicator-bar"><div class="indicator-fill legitimacy" style="width:${s.legitimacy}%"></div></div><div class="indicator-value">${s.legitimacy}</div></div>
    </div>
  `).join('');
  grid.querySelectorAll('.state-card').forEach(c => c.addEventListener('click', () => selectState(c.dataset.state)));
}

function selectState(stateId) {
  selectedState = STATES.find(s => s.id === stateId);
  document.querySelectorAll('#statesGrid .state-card').forEach(c => c.classList.toggle('selected', c.dataset.state === stateId));
  const detail = document.getElementById('stateDetail');
  detail.classList.remove('hidden');
  document.getElementById('detailStateName').textContent = selectedState.name;
  document.getElementById('detailStateDesc').textContent = selectedState.description;
  const renderList = (id, items) => { document.getElementById(id).innerHTML = items.map(i => `<li><span>${i.name}</span><span class="profile-value">${i.value}</span></li>`).join(''); };
  renderList('capabilityList', selectedState.indicators.capability);
  renderList('controlList', selectedState.indicators.control);
  renderList('legitimacyList', selectedState.indicators.legitimacy);
  document.getElementById('characteristicsList').innerHTML = selectedState.characteristics.map(c => `<li><span>${c}</span></li>`).join('');
  detail.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function renderComparisonTable() {
  document.getElementById('comparisonRows').innerHTML = STATES.map(s => `<div class="comparison-row"><div class="metric">${s.flag} ${s.name}</div><div>${s.capability}/100</div><div>${s.control}/100</div><div>${s.legitimacy}/100</div></div>`).join('');
  document.getElementById('comparisonTable').classList.remove('hidden');
}

function renderScenarioStateSelect() {
  const grid = document.getElementById('scenarioStateSelect');
  grid.innerHTML = STATES.map(s => `<div class="state-card" data-state="${s.id}" style="padding:12px;"><div class="flag" style="font-size:24px;margin-bottom:4px;">${s.flag}</div><h3 style="font-size:14px;margin:0;">${s.name}</h3></div>`).join('');
  grid.querySelectorAll('.state-card').forEach(c => c.addEventListener('click', () => {
    selectedScenarioState = STATES.find(s => s.id === c.dataset.state);
    grid.querySelectorAll('.state-card').forEach(x => x.classList.remove('selected'));
    c.classList.add('selected');
    loadScenario();
  }));
}

function loadScenario() {
  if (!selectedScenarioState) return;
  const sc = SCENARIOS[currentScenario];
  document.getElementById('stateSelectPrompt').classList.add('hidden');
  document.getElementById('scenarioContent').classList.remove('hidden');
  document.getElementById('outcomePanel').classList.add('hidden');
  document.getElementById('scenarioMeta').textContent = `Scenario ${currentScenario+1} of ${SCENARIOS.length} Â· Playing as ${selectedScenarioState.flag} ${selectedScenarioState.name}`;
  document.getElementById('scenarioTag').textContent = sc.tag;
  document.getElementById('scenarioTitle').textContent = sc.title;
  document.getElementById('scenarioContext').textContent = sc.context;
  document.getElementById('stakeCapability').textContent = sc.stakes.capability;
  document.getElementById('stakeControl').textContent = sc.stakes.control;
  document.getElementById('stakeLegitimacy').textContent = sc.stakes.legitimacy;
  document.querySelectorAll('.progress-step').forEach((step, i) => { step.classList.remove('completed','current'); if(i<currentScenario) step.classList.add('completed'); if(i===currentScenario) step.classList.add('current'); });
  const og = document.getElementById('optionsGrid');
  og.innerHTML = sc.options.map(o => `<div class="option-card" data-option="${o.id}"><div class="option-header"><div class="option-label">${o.label}</div></div><div class="option-title">${o.title}</div><div class="option-desc">${o.description}</div><div class="option-impacts">${o.impacts.map(i => `<span class="impact-chip ${i.type}">${i.text}</span>`).join('')}</div></div>`).join('');
  og.querySelectorAll('.option-card').forEach(c => c.addEventListener('click', () => {
    selectedOption = c.dataset.option;
    og.querySelectorAll('.option-card').forEach(x => x.classList.remove('selected'));
    c.classList.add('selected');
    document.getElementById('commitDecisionBtn').disabled = false;
  }));
  selectedOption = null;
  document.getElementById('commitDecisionBtn').disabled = true;
}

function getOutcome(scenarioId, optionId, stateId) {
  const m = STATE_MODIFIERS[scenarioId];
  if (m && m[optionId] && m[optionId][stateId]) return m[optionId][stateId];
  return { cap: 0, ctrl: 0, leg: 0, narrative: 'Outcome data unavailable.' };
}

function getStructuralInsight() {
  const s = selectedScenarioState;
  const ins = [];
  if (s.capability >= 80) ins.push('High capability provides cushion against disruption and domestic alternatives.');
  else if (s.capability <= 40) ins.push('Low capability means fewer domestic alternatives and greater vulnerability to disruption.');
  if (s.control >= 80) ins.push('Strong state control enables decisive action but may constrain compromise options.');
  else if (s.control <= 40) ins.push('Limited state control makes enforcement difficult regardless of policy intent.');
  if (s.legitimacy >= 70) ins.push('High legitimacy provides normative cover for assertive action.');
  else if (s.legitimacy <= 50) ins.push('Contested legitimacy means assertive actions face greater scrutiny.');
  return ins.length ? ins.join(' ') : 'The interaction between these dimensions shapes available options and their consequences.';
}

function commitDecision() {
  if (!selectedOption) return;
  const sc = SCENARIOS[currentScenario];
  const out = getOutcome(sc.id, selectedOption, selectedScenarioState.id);
  const optData = sc.options.find(o => o.id === selectedOption);
  cumulativeScores.capability += out.cap;
  cumulativeScores.control += out.ctrl;
  cumulativeScores.legitimacy += out.leg;
  decisionHistory.push({ scenario: sc.tag, state: selectedScenarioState.name, stateFlag: selectedScenarioState.flag, decision: optData.title, capability: out.cap, control: out.ctrl, legitimacy: out.leg });
  const fmt = v => (v > 0 ? '+' : '') + v;
  const setEl = (id, val) => { const el = document.getElementById(id); el.textContent = fmt(val); el.className = 'change ' + (val >= 0 ? 'positive' : 'negative'); };
  setEl('outcomeCapability', out.cap);
  setEl('outcomeControl', out.ctrl);
  setEl('outcomeLegitimacy', out.leg);
  document.getElementById('outcomeNarrative').innerHTML = `
    <p><strong>${selectedScenarioState.flag} As ${selectedScenarioState.name}:</strong></p>
    <p>${out.narrative}</p>
    <div class="state-analysis"><strong>Structural Position Context</strong><br>${selectedScenarioState.name}'s baseline â€” Capability: ${selectedScenarioState.capability}, Control: ${selectedScenarioState.control}, Legitimacy: ${selectedScenarioState.legitimacy} â€” shapes why this outcome differs from what other states would experience. ${getStructuralInsight()}</div>
  `;
  document.getElementById('outcomePanel').classList.remove('hidden');
  document.getElementById('commitDecisionBtn').disabled = true;
  document.querySelectorAll('.option-card').forEach(c => c.style.pointerEvents = 'none');
  document.getElementById('nextScenarioBtn').textContent = currentScenario >= SCENARIOS.length - 1 ? 'Complete Simulation' : 'Next Scenario';
  document.getElementById('outcomePanel').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function nextScenario() {
  currentScenario++;
  if (currentScenario >= SCENARIOS.length) { showDebrief(); return; }
  document.getElementById('scenarioContent').classList.add('hidden');
  document.getElementById('stateSelectPrompt').classList.remove('hidden');
  renderScenarioStateSelect();
  setTimeout(() => { const prev = document.querySelector(`#scenarioStateSelect [data-state="${selectedScenarioState.id}"]`); if (prev) prev.click(); }, 0);
}

function showDebrief() {
  switchTab('debrief');
  document.getElementById('summaryBody').innerHTML = decisionHistory.map(d => `<tr><td>${d.scenario}</td><td>${d.stateFlag} ${d.state}</td><td>${d.decision}</td><td style="color:${d.capability>=0?'#16a34a':'#dc2626'};font-weight:600">${d.capability>=0?'+':''}${d.capability}</td><td style="color:${d.control>=0?'#16a34a':'#dc2626'};font-weight:600">${d.control>=0?'+':''}${d.control}</td><td style="color:${d.legitimacy>=0?'#16a34a':'#dc2626'};font-weight:600">${d.legitimacy>=0?'+':''}${d.legitimacy}</td></tr>`).join('');
  const { capability: c, control: ct, legitimacy: l } = cumulativeScores;
  let assessment;
  if (c > ct && c > l) assessment = 'Your decisions prioritised <strong>capability</strong> â€” building and preserving technical capacity. This approach treats technological power as a possession to be accumulated. Consider: does capability without legitimacy produce sustainable power?';
  else if (ct > c && ct > l) assessment = 'Your decisions prioritised <strong>control</strong> â€” strengthening governance and institutional frameworks. This approach treats technological power as regulatory authority. Consider: can control be exercised without the underlying capability?';
  else if (l > c && l > ct) assessment = 'Your decisions prioritised <strong>legitimacy</strong> â€” building normative authority and partnership trust. This approach treats technological power as accepted authority. Consider: does legitimacy alone provide leverage when facing actors who reject your norms?';
  else assessment = 'Your decisions reflect a <strong>balanced approach</strong> across capability, control, and legitimacy â€” recognising that technological power emerges from their interaction rather than any single dimension.';
  document.getElementById('finalPosition').innerHTML = `<strong>Cumulative changes:</strong> Capability ${c>=0?'+':''}${c}, Control ${ct>=0?'+':''}${ct}, Legitimacy ${l>=0?'+':''}${l}<br><br>${assessment}`;
  document.getElementById('debriefMeta').textContent = `${decisionHistory.length} decisions completed`;
}

function downloadResults() {
  const h = ['Scenario','State','Decision','Capability Change','Control Change','Legitimacy Change'];
  const r = decisionHistory.map(d => [d.scenario,d.state,d.decision,d.capability,d.control,d.legitimacy]);
  const t = ['TOTAL','','',cumulativeScores.capability,cumulativeScores.control,cumulativeScores.legitimacy];
  const csv = [h,...r,t].map(row => row.map(c => `"${c}"`).join(',')).join('\n');
  const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'geopolitics_tech_simulation_results.csv';
  document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url);
}

function restart() {
  currentScenario = 0; selectedOption = null; selectedScenarioState = null;
  decisionHistory = []; cumulativeScores = { capability: 0, control: 0, legitimacy: 0 };
  document.getElementById('scenarioContent').classList.add('hidden');
  document.getElementById('stateSelectPrompt').classList.remove('hidden');
  document.getElementById('comparisonTable').classList.add('hidden');
  document.getElementById('stateDetail').classList.add('hidden');
  renderScenarioStateSelect(); switchTab('intro');
}

tabBtns.forEach(t => t.addEventListener('click', () => switchTab(t.dataset.tab)));
document.getElementById('startBtn').addEventListener('click', () => switchTab('compare'));
document.getElementById('toScenarioBtn').addEventListener('click', () => switchTab('scenario'));
document.getElementById('compareAllBtn').addEventListener('click', renderComparisonTable);
document.getElementById('commitDecisionBtn').addEventListener('click', commitDecision);
document.getElementById('nextScenarioBtn').addEventListener('click', nextScenario);
document.getElementById('downloadResultsBtn').addEventListener('click', downloadResults);
document.getElementById('restartBtn').addEventListener('click', restart);

renderStateCards();
renderScenarioStateSelect();
</script>
</body>
</html>
